from .config import get_config
from .db import db, migrate
import connexion


def create_app():
    connexionApp = connexion.FlaskApp(__name__, specification_dir='openapi/')
    app = connexionApp.app
    connexionApp.add_api('api.yaml')
    app.config.from_object(get_config())
    db.init_app(app)
    migrate.init_app(app, db, directory='api/db/migrations')
    return app
